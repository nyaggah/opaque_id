@import "just-the-docs";


// Color Variables - Light theme (default)
:root {
  // Light theme base colors
  --body-background-color: #ffffff;
  --body-text-color: #24292f;
  --body-heading-color: #1f2328;
  
  // Purple accent colors
  --link-color: #a855f7;
  --link-color-hover: #c084fc;
  --link-color-visited: #9333ea;
  
  // Navigation colors
  --nav-child-link-color: #656d76;
  --nav-child-link-color-hover: #a855f7;
  --nav-child-link-color-active: #a855f7;
  
  // Code colors
  --code-background-color: #f6f8fa;
  --code-text-color: #24292f;
  --code-border-color: #d0d7de;
  
  // Button colors
  --btn-primary-color: #a855f7;
  --btn-primary-color-dark: #9333ea;
  --btn-primary-color-hover: #c084fc;
  
  // Border colors
  --border-color: #d0d7de;
  --border-color-light: #e1e4e8;
  
  // Table colors
  --table-background-color: #ffffff;
  --table-header-background-color: #f6f8fa;
  --table-border-color: #d0d7de;
  
  // Search colors
  --search-background-color: #ffffff;
  --search-border-color: #d0d7de;
  --search-result-preview-color: #656d76;
  
  // Footer colors
  --footer-background-color: #f6f8fa;
  --footer-text-color: #656d76;
  
  // Aux links colors
  --aux-link-color: #656d76;
  --aux-link-hover-color: #a855f7;
}

// Dark theme support
@media (prefers-color-scheme: dark) {
  :root {
    // Dark theme base colors
    --body-background-color: #0d1117;
    --body-text-color: #e6edf3;
    --body-heading-color: #f0f6fc;
    
    // Navigation colors
    --nav-child-link-color: #8b949e;
    --nav-child-link-color-hover: #a855f7;
    --nav-child-link-color-active: #a855f7;
    
    // Code colors
    --code-background-color: #161b22;
    --code-text-color: #e6edf3;
    --code-border-color: #30363d;
    
    // Border colors
    --border-color: #30363d;
    --border-color-light: #21262d;
    
    // Table colors
    --table-background-color: #0d1117;
    --table-header-background-color: #161b22;
    --table-border-color: #30363d;
    
    // Search colors
    --search-background-color: #0d1117;
    --search-border-color: #30363d;
    --search-result-preview-color: #8b949e;
    
    // Footer colors
    --footer-background-color: #0d1117;
    --footer-text-color: #8b949e;
    
    // Aux links colors
    --aux-link-color: #8b949e;
    --aux-link-hover-color: #a855f7;
  }
}

// Dark theme overrides
body {
  background-color: var(--body-background-color);
  color: var(--body-text-color);
}

// Headings
h1, h2, h3, h4, h5, h6 {
  color: var(--body-heading-color);
}

// Links
a {
  color: var(--link-color);
  
  &:hover {
    color: var(--link-color-hover);
  }
  
  &:visited {
    color: var(--link-color-visited);
  }
}

// Navigation
.nav-list {
  .nav-list-item {
    .nav-list-link {
      color: var(--nav-child-link-color);
      
      &:hover {
        color: var(--nav-child-link-color-hover);
        background-color: rgba(168, 85, 247, 0.1);
      }
      
      &.active {
        color: var(--nav-child-link-color-active);
        background-color: rgba(168, 85, 247, 0.2);
      }
    }
  }
}

// Code blocks
.highlight {
  background-color: var(--code-background-color);
  border: 1px solid var(--code-border-color);
  border-radius: 6px;
  margin: 1rem 0;
  
  pre {
    background-color: transparent;
    color: var(--code-text-color);
    padding: 1rem;
    overflow-x: auto;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.875rem;
    line-height: 1.5;
  }
  
  // Ruby syntax highlighting
  .k { color: #c084fc; } // Keywords (def, class, if, etc.)
  .s { color: #10b981; } // Strings
  .s2 { color: #10b981; } // String literals
  .nb { color: #f59e0b; } // Built-in methods
  .nf { color: #3b82f6; } // Function names
  .nc { color: #8b5cf6; } // Class names
  .no { color: #ef4444; } // Constants
  .nv { color: #06b6d4; } // Variables
  .c1 { color: #6b7280; } // Comments
  .c { color: #6b7280; } // Comments
  .p { color: #e5e7eb; } // Punctuation
  .o { color: #e5e7eb; } // Operators
  .mi { color: #f59e0b; } // Numbers
  .mf { color: #f59e0b; } // Float numbers
  .mh { color: #f59e0b; } // Hex numbers
  .err { color: #ef4444; } // Errors
  .w { color: #fbbf24; } // Warnings
}

// Inline code
code {
  background-color: var(--code-background-color);
  color: var(--code-text-color);
  border: 1px solid var(--code-border-color);
  border-radius: 3px;
  padding: 0.2em 0.4em;
}

// Tables
table {
  background-color: var(--table-background-color);
  border: 1px solid var(--table-border-color);
  
  th {
    background-color: var(--table-header-background-color);
    color: var(--body-heading-color);
    border-bottom: 1px solid var(--table-border-color);
  }
  
  td {
    border-bottom: 1px solid var(--table-border-color);
  }
  
  tr:nth-child(even) {
    background-color: rgba(168, 85, 247, 0.05);
  }
}

// Search
.search {
  .search-input {
    background-color: var(--search-background-color);
    border: 1px solid var(--search-border-color);
    color: var(--body-text-color);
    
    &:focus {
      border-color: var(--link-color);
      box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.2);
    }
  }
  
  .search-results {
    .search-result {
      .search-result-title {
        color: var(--link-color);
      }
      
      .search-result-preview {
        color: var(--search-result-preview-color);
      }
    }
  }
}

// Buttons
.btn {
  &.btn-primary {
    background-color: var(--btn-primary-color);
    border-color: var(--btn-primary-color);
    
    &:hover {
      background-color: var(--btn-primary-color-hover);
      border-color: var(--btn-primary-color-hover);
    }
  }
}

// Footer
.site-footer {
  background-color: var(--footer-background-color);
  color: var(--footer-text-color);
  border-top: 1px solid var(--border-color);
}

// Header
.site-header {
  background-color: var(--body-background-color);
  border-bottom: 1px solid var(--border-color);
}

// Main content
.main-content {
  background-color: var(--body-background-color);
}

// Sidebar
.site-nav {
  background-color: var(--body-background-color);
  border-right: 1px solid var(--border-color);
}

// Breadcrumbs
.breadcrumb-nav {
  .breadcrumb-nav-list {
    .breadcrumb-nav-list-item {
      color: var(--nav-child-link-color);
      
      &::after {
        color: var(--nav-child-link-color);
      }
    }
  }
}

// Custom OpaqueId branding
.site-title {
  color: var(--body-heading-color);
  font-weight: 700;

  &:hover {
    color: var(--link-color);
  }
}

.site-subtitle {
  color: var(--nav-child-link-color);
}

// Auxiliary links styling (top of sidebar)
.aux-nav {
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--border-color-light);

  .aux-nav-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;

    .aux-nav-list-item {
      margin: 0;

      .aux-nav-list-link {
        display: inline-flex;
        align-items: center;
        padding: 0.375rem 0.75rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--aux-link-color);
        text-decoration: none;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        background-color: transparent;
        transition: all 0.2s ease;

        &:hover {
          color: var(--aux-link-hover-color);
          border-color: var(--aux-link-hover-color);
          background-color: rgba(168, 85, 247, 0.05);
          text-decoration: none;
        }

        &:focus {
          outline: 2px solid var(--aux-link-hover-color);
          outline-offset: 2px;
        }

        // External link icon
        &[href^="http"]:not([href*="nyaggah.github.io"]) {
          &::after {
            content: "â†—";
            margin-left: 0.25rem;
            font-size: 0.75rem;
            opacity: 0.7;
          }
        }
      }
    }
  }
}

// Purple accent for active states
.nav-list-link.active,
.breadcrumb-nav-list-item.active {
  color: var(--link-color);
  font-weight: 600;
}

// Custom scrollbar
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--body-background-color);
}

::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: 4px;
  
  &:hover {
    background: var(--link-color);
  }
}

// Responsive design improvements
@media (max-width: 768px) {
  .site-nav {
    background-color: var(--body-background-color);
  }
  
  .main-content {
    padding: 1rem;
  }
  
  // Mobile navigation
  .nav-list {
    .nav-list-item {
      .nav-list-link {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
      }
    }
  }
  
  // Mobile tables
  table {
    font-size: 0.875rem;
    display: block;
    overflow-x: auto;
    white-space: nowrap;
  }
  
  // Mobile code blocks
  .highlight {
    pre {
      font-size: 0.8rem;
      padding: 0.75rem;
    }
  }
  
  // Mobile search
  .search {
    .search-input {
      font-size: 1rem;
      padding: 0.75rem;
    }
  }
  
  // Mobile buttons
  .btn {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
  }
}

@media (max-width: 480px) {
  .main-content {
    padding: 0.75rem;
  }
  
  // Extra small screens
  h1 { font-size: 1.75rem; }
  h2 { font-size: 1.5rem; }
  h3 { font-size: 1.25rem; }
  h4 { font-size: 1.125rem; }
  
  // Mobile code blocks
  .highlight {
    pre {
      font-size: 0.75rem;
      padding: 0.5rem;
    }
  }
  
  // Mobile tables - stack on very small screens
  table {
    display: block;
    width: 100%;
    
    thead, tbody, tr, th, td {
      display: block;
    }
    
    thead tr {
      position: absolute;
      top: -9999px;
      left: -9999px;
    }
    
    tr {
      border: 1px solid var(--border-color);
      margin-bottom: 0.5rem;
      padding: 0.5rem;
    }
    
    td {
      border: none;
      position: relative;
      padding-left: 50%;
      
      &:before {
        content: attr(data-label) ": ";
        position: absolute;
        left: 6px;
        width: 45%;
        padding-right: 10px;
        white-space: nowrap;
        font-weight: bold;
        color: var(--link-color);
      }
    }
  }
}

// Tablet optimization
@media (min-width: 769px) and (max-width: 1024px) {
  .main-content {
    padding: 1.5rem;
  }
  
  .site-nav {
    width: 280px;
  }
  
  .main-content-wrap {
    margin-left: 280px;
  }
}

// Large screen optimization
@media (min-width: 1200px) {
  .main-content {
    max-width: 1000px;
    margin: 0 auto;
  }
  
  .site-nav {
    width: 300px;
  }
  
  .main-content-wrap {
    margin-left: 300px;
  }
}

// Print styles
@media print {
  body {
    background-color: white;
    color: black;
  }
  
  .site-nav,
  .site-header,
  .site-footer {
    display: none;
  }
}

// Performance optimizations
* {
  box-sizing: border-box;
}

// Optimize font loading
@font-face {
  font-family: 'Monaco';
  src: local('Monaco'), local('Menlo'), local('Ubuntu Mono'), monospace;
  font-display: swap;
}

// Optimize images
img {
  max-width: 100%;
  height: auto;
}

// Optimize code blocks
.highlight {
  contain: layout style;
  
  pre {
    contain: layout style;
    will-change: auto;
  }
}

// Optimize tables
table {
  contain: layout;
}

// Custom utility classes
.text-purple {
  color: var(--link-color);
}

.bg-purple {
  background-color: var(--link-color);
}

.border-purple {
  border-color: var(--link-color);
}

// Badge styling
.badge {
  background-color: var(--link-color);
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
}

// Alert boxes
.alert {
  padding: 1rem;
  border-radius: 6px;
  margin: 1rem 0;
  
  &.alert-info {
    background-color: rgba(168, 85, 247, 0.1);
    border: 1px solid var(--link-color);
    color: var(--link-color);
  }
  
  &.alert-warning {
    background-color: rgba(255, 193, 7, 0.1);
    border: 1px solid #ffc107;
    color: #ffc107;
  }
  
  &.alert-success {
    background-color: rgba(40, 167, 69, 0.1);
    border: 1px solid #28a745;
    color: #28a745;
  }
}

// Browser compatibility fixes
// IE11 support
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  .highlight {
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
    }
  }
}

// Firefox specific fixes
@-moz-document url-prefix() {
  .highlight {
    pre {
      overflow-x: auto;
    }
  }
}

// Safari specific fixes
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  .highlight {
    pre {
      -webkit-overflow-scrolling: touch;
    }
  }
}

// Fallbacks for older browsers
.no-cssgrid {
  .main-content-wrap {
    display: block;
  }
}

.no-flexbox {
  .nav-list {
    display: block;
  }
  
  .search {
    display: block;
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  :root {
    --body-background-color: #000000;
    --body-text-color: #ffffff;
    --link-color: #ffff00;
    --border-color: #ffffff;
  }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

// Accessibility improvements
// Focus indicators
a:focus,
button:focus,
input:focus,
textarea:focus,
select:focus {
  outline: 2px solid var(--link-color);
  outline-offset: 2px;
}

// Skip links
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--link-color);
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
  
  &:focus {
    top: 6px;
  }
}

// Screen reader only content
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// High contrast mode improvements
@media (prefers-contrast: high) {
  .highlight {
    border: 2px solid var(--border-color);
  }
  
  .btn {
    border: 2px solid currentColor;
  }
}

// Color contrast improvements
@media (prefers-contrast: more) {
  :root {
    --body-text-color: #ffffff;
    --nav-child-link-color: #ffffff;
    --search-result-preview-color: #ffffff;
  }
}

// Keyboard navigation improvements
.nav-list-link:focus,
.search-input:focus {
  background-color: rgba(168, 85, 247, 0.1);
}

// ARIA live regions for dynamic content
.aria-live {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

// Table accessibility
table {
  caption {
    font-weight: bold;
    margin-bottom: 0.5rem;
  }
  
  th {
    font-weight: bold;
  }
  
  // Ensure table headers are properly associated
  th[scope="col"],
  th[scope="row"] {
    font-weight: bold;
  }
}

// Form accessibility
input, textarea, select {
  &:required {
    border-left: 3px solid var(--link-color);
  }
  
  &:invalid {
    border-color: #ef4444;
  }
  
  &:valid {
    border-color: #10b981;
  }
}

// Error messages
.error-message {
  color: #ef4444;
  font-size: 0.875rem;
  margin-top: 0.25rem;
}

// Success messages
.success-message {
  color: #10b981;
  font-size: 0.875rem;
  margin-top: 0.25rem;
}
